/*!
 * rec-scp v1.0.13
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("child_process"),require("fs"),require("path")):"function"==typeof define&&define.amd?define(["child_process","fs","path"],r):(t="undefined"!=typeof globalThis?globalThis:t||self)["rec-scp"]=r(t.child_process,t.fs,t.path)}(this,function(t,r,e){"use strict";var n=Array.isArray,o="object"==typeof global&&global&&global.Object===Object&&global,u="object"==typeof self&&self&&self.Object===Object&&self,i=o||u||Function("return this")(),c=i.Symbol,f=Object.prototype,a=f.hasOwnProperty,s=f.toString,l=c?c.toStringTag:void 0;var p=Object.prototype.toString;var h=c?c.toStringTag:void 0;function d(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":h&&h in Object(t)?function(t){var r=a.call(t,l),e=t[l];try{t[l]=void 0;var n=!0}catch(t){}var o=s.call(t);return n&&(r?t[l]=e:delete t[l]),o}(t):function(t){return p.call(t)}(t)}function y(t){return null!=t&&"object"==typeof t}function v(t){return"symbol"==typeof t||y(t)&&"[object Symbol]"==d(t)}var b=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function _(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}function j(t){if(!_(t))return!1;var r=d(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}var S,m=i["__core-js_shared__"],O=(S=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"";var x=Function.prototype.toString;function k(t){if(null!=t){try{return x.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var w=/^\[object .+?Constructor\]$/,$=Function.prototype,R=Object.prototype,P=$.toString,z=R.hasOwnProperty,A=RegExp("^"+P.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E(t){return!(!_(t)||(r=t,O&&O in r))&&(j(t)?A:w).test(k(t));var r}function N(t,r){var e=function(t,r){return null==t?void 0:t[r]}(t,r);return E(e)?e:void 0}var F=N(Object,"create");var T=Object.prototype.hasOwnProperty;var M=Object.prototype.hasOwnProperty;function C(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function D(t,r){return t===r||t!=t&&r!=r}function H(t,r){for(var e=t.length;e--;)if(D(t[e][0],r))return e;return-1}C.prototype.clear=function(){this.__data__=F?F(null):{},this.size=0},C.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},C.prototype.get=function(t){var r=this.__data__;if(F){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return T.call(r,t)?r[t]:void 0},C.prototype.has=function(t){var r=this.__data__;return F?void 0!==r[t]:M.call(r,t)},C.prototype.set=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=F&&void 0===r?"__lodash_hash_undefined__":r,this};var q=Array.prototype.splice;function I(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}I.prototype.clear=function(){this.__data__=[],this.size=0},I.prototype.delete=function(t){var r=this.__data__,e=H(r,t);return!(e<0)&&(e==r.length-1?r.pop():q.call(r,e,1),--this.size,!0)},I.prototype.get=function(t){var r=this.__data__,e=H(r,t);return e<0?void 0:r[e][1]},I.prototype.has=function(t){return H(this.__data__,t)>-1},I.prototype.set=function(t,r){var e=this.__data__,n=H(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};var W=N(i,"Map");function B(t,r){var e,n,o=t.__data__;return("string"==(n=typeof(e=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?o["string"==typeof r?"string":"hash"]:o.map}function G(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}G.prototype.clear=function(){this.size=0,this.__data__={hash:new C,map:new(W||I),string:new C}},G.prototype.delete=function(t){var r=B(this,t).delete(t);return this.size-=r?1:0,r},G.prototype.get=function(t){return B(this,t).get(t)},G.prototype.has=function(t){return B(this,t).has(t)},G.prototype.set=function(t,r){var e=B(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function J(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],u=e.cache;if(u.has(o))return u.get(o);var i=t.apply(this,n);return e.cache=u.set(o,i)||u,i};return e.cache=new(J.Cache||G),e}J.Cache=G;var L,V,K,U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q=/\\(\\)?/g,X=(L=function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(U,function(t,e,n,o){r.push(n?o.replace(Q,"$1"):e||t)}),r},V=J(L,function(t){return 500===K.size&&K.clear(),t}),K=V.cache,V),Y=X;var Z=c?c.prototype:void 0,tt=Z?Z.toString:void 0;function rt(t){if("string"==typeof t)return t;if(n(t))return function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o}(t,rt)+"";if(v(t))return tt?tt.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}function et(t){return null==t?"":rt(t)}function nt(t,r){return n(t)?t:function(t,r){if(n(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!v(t))||g.test(t)||!b.test(t)||null!=r&&t in Object(r)}(t,r)?[t]:Y(et(t))}function ot(t){if("string"==typeof t||v(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}function ut(t,r,e){var n=null==t?void 0:function(t,r){for(var e=0,n=(r=nt(r,t)).length;null!=t&&e<n;)t=t[ot(r[e++])];return e&&e==n?t:void 0}(t,r);return void 0===n?e:n}function it(t,r,e){var n=t.length;return e=void 0===e?n:e,!r&&e>=n?t:function(t,r,e){var n=-1,o=t.length;r<0&&(r=-r>o?0:o+r),(e=e>o?o:e)<0&&(e+=o),o=r>e?0:e-r>>>0,r>>>=0;for(var u=Array(o);++n<o;)u[n]=t[n+r];return u}(t,r,e)}var ct=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function ft(t){return ct.test(t)}function at(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!j(t)}var st=/^(?:0|[1-9]\d*)$/;function lt(t,r,e){if(!_(e))return!1;var n=typeof r;return!!("number"==n?at(e)&&function(t,r){var e=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&st.test(t))&&t>-1&&t%1==0&&t<r}(r,e.length):"string"==n&&r in e)&&D(e[r],t)}var pt="object"==typeof exports&&exports&&!exports.nodeType&&exports,ht=pt&&"object"==typeof module&&module&&!module.nodeType&&module,dt=ht&&ht.exports===pt&&o.process,yt=function(){try{var t=ht&&ht.require&&ht.require("util").types;return t||dt&&dt.binding&&dt.binding("util")}catch(t){}}(),vt=yt&&yt.isRegExp,bt=vt?function(t){return function(r){return t(r)}}(vt):function(t){return y(t)&&"[object RegExp]"==d(t)},gt=bt;var _t="\\ud800-\\udfff",jt="["+_t+"]",St="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",mt="\\ud83c[\\udffb-\\udfff]",Ot="[^"+_t+"]",xt="(?:\\ud83c[\\udde6-\\uddff]){2}",kt="[\\ud800-\\udbff][\\udc00-\\udfff]",wt="(?:"+St+"|"+mt+")"+"?",$t="[\\ufe0e\\ufe0f]?",Rt=$t+wt+("(?:\\u200d(?:"+[Ot,xt,kt].join("|")+")"+$t+wt+")*"),Pt="(?:"+[Ot+St+"?",St,xt,kt,jt].join("|")+")",zt=RegExp(mt+"(?="+mt+")|"+Pt+Rt,"g");function At(t){return ft(t)?function(t){return t.match(zt)||[]}(t):function(t){return t.split("")}(t)}function Et(t,r,e){return e&&"number"!=typeof e&&lt(t,r,e)&&(r=e=void 0),(e=void 0===e?4294967295:e>>>0)?(t=et(t))&&("string"==typeof r||null!=r&&!gt(r))&&!(r=rt(r))&&ft(t)?it(At(t),0,e):t.split(r,e):[]}var Nt=Object.prototype;var Ft=function(t,r){return function(e){return t(r(e))}}(Object.keys,Object),Tt=Ft,Mt=Object.prototype.hasOwnProperty;function Ct(t){if(e=(r=t)&&r.constructor,r!==("function"==typeof e&&e.prototype||Nt))return Tt(t);var r,e,n=[];for(var o in Object(t))Mt.call(t,o)&&"constructor"!=o&&n.push(o);return n}var Dt=N(i,"DataView"),Ht=N(i,"Promise"),qt=N(i,"Set"),It=N(i,"WeakMap"),Wt="[object Map]",Bt="[object Promise]",Gt="[object Set]",Jt="[object WeakMap]",Lt="[object DataView]",Vt=k(Dt),Kt=k(W),Ut=k(Ht),Qt=k(qt),Xt=k(It),Yt=d;(Dt&&Yt(new Dt(new ArrayBuffer(1)))!=Lt||W&&Yt(new W)!=Wt||Ht&&Yt(Ht.resolve())!=Bt||qt&&Yt(new qt)!=Gt||It&&Yt(new It)!=Jt)&&(Yt=function(t){var r=d(t),e="[object Object]"==r?t.constructor:void 0,n=e?k(e):"";if(n)switch(n){case Vt:return Lt;case Kt:return Wt;case Ut:return Bt;case Qt:return Gt;case Xt:return Jt}return r});var Zt=Yt;var tr,rr=(tr="length",function(t){return null==t?void 0:t[tr]}),er="\\ud800-\\udfff",nr="["+er+"]",or="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ur="\\ud83c[\\udffb-\\udfff]",ir="[^"+er+"]",cr="(?:\\ud83c[\\udde6-\\uddff]){2}",fr="[\\ud800-\\udbff][\\udc00-\\udfff]",ar="(?:"+or+"|"+ur+")"+"?",sr="[\\ufe0e\\ufe0f]?",lr=sr+ar+("(?:\\u200d(?:"+[ir,cr,fr].join("|")+")"+sr+ar+")*"),pr="(?:"+[ir+or+"?",or,cr,fr,nr].join("|")+")",hr=RegExp(ur+"(?="+ur+")|"+pr+lr,"g");function dr(t){return ft(t)?function(t){for(var r=hr.lastIndex=0;hr.test(t);)++r;return r}(t):rr(t)}function yr(t){if(null==t)return 0;if(at(t))return"string"==typeof(r=t)||!n(r)&&y(r)&&"[object String]"==d(r)?dr(t):t.length;var r,e=Zt(t);return"[object Map]"==e||"[object Set]"==e?t.size:Ct(t).length}var vr=/\s/;var br=/^\s+/;function gr(t){return t?t.slice(0,function(t){for(var r=t.length;r--&&vr.test(t.charAt(r)););return r}(t)+1).replace(br,""):t}var _r=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,Sr=/^0o[0-7]+$/i,mr=parseInt;function Or(t){if("number"==typeof t)return t;if(v(t))return NaN;if(_(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=_(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=gr(t);var e=jr.test(t);return e||Sr.test(t)?mr(t.slice(2),e?2:8):_r.test(t)?NaN:+t}var xr=1/0;function kr(t){return t?(t=Or(t))===xr||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function wr(t){var r=kr(t),e=r%1;return r==r?e?r-e:r:0}var $r=i.isFinite,Rr=Math.min;var Pr=function(t){var r=Math[t];return function(t,e){if(t=Or(t),(e=null==e?0:Rr(wr(e),292))&&$r(t)){var n=(et(t)+"e").split("e");return+((n=(et(r(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}("round"),zr=Pr;function Ar(t){return!(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)||""===t)}function Er(t){let r=!1;if(Ar(t))r=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(function(t){return t!=t}(t))return!1;r=!0}return r}function Nr(t){if(!Er(t))return 0;return kr(t)}function Fr(t){if(!Er(t))return 0;t=Nr(t);let r=zr(t);return"0"===String(r)?0:r}function Tr(t){return!0===(r=t)||!1===r||y(r)&&"[object Boolean]"==d(r);var r}function Mr(t){return!!Er(t)&&(t=Nr(t),"number"==typeof(r=t)&&r==wr(r));var r}function Cr(t){if(!Mr(t))return!1;return Fr(t)>=0}function Dr(t,r){if(!Ar(t))return"";if(!Cr(r))return"";if(0===(r=Fr(r)))return"";let e=t.length-r;return e<0&&(e=0),t.substring(e,e+r)}function Hr(t,r){return Ar(t)&&Cr(r)?0===(r=Fr(r))?t:function(t,r){return Ar(t)&&Cr(r)?0===(r=Fr(r))?"":t.substring(0,r):""}(t,t.length-r):""}function qr(t){if(!Ar(t))return{path:"",isRoot:!1};for(;t.indexOf("\\\\")>=0;)t=t.replace("\\\\","\\");for(;t.indexOf("//")>=0;)t=t.replace("//","/");if(":"===Dr(t,1))return{path:`${t}\\`,isRoot:!0};if("\\"===Dr(t,1)){let r=Hr(t,1);return":"===Dr(r,1)?{path:t,isRoot:!0}:{path:r,isRoot:!1}}if("/"===Dr(t,1)){let r=Hr(t,1);return 0===r.length?{path:t,isRoot:!0}:{path:r,isRoot:!1}}return{path:t,isRoot:!1}}function Ir(t){if(!Ar(t))return"";let r=qr(t);if(r.isRoot)return r.path;let e=function(t){if(!Ar(t))return"";let r=qr(t);if(r.isRoot)return r.path;let e=r.path;try{e=e.split("\\").pop().split("/").pop()}catch(t){}return e}(t=r.path);if(!Ar(e))return t;let n=qr(t=Hr(t,e.length));return n.isRoot,n.path}function Wr(t,r={}){let e=ut(r,"fs");if(!e.existsSync(t))return!1;let n=e.lstatSync(t);return!n.isFile()&&!n.isSymbolicLink()}function Br(t,r,e={}){let n=null,o=ut(e,"fs"),u=Ir(t);Wr(u,{fs:o})||function(t,r={}){let e=ut(r,"fs");if(Wr(t,{fs:e}))return{success:"input folder is already exists: "+t};if(e.existsSync(t))return{error:"input path already exists: "+t};try{e.mkdirSync(t,{recursive:!0})}catch(t){return{error:t}}}(u,{fs:o});try{o.writeFileSync(t,r,"utf8")}catch(t){n=t}return null!==n?{error:n}:{success:t}}function Gr(t,e,n={}){let o=null;if(u=e,"[object Object]"!==Object.prototype.toString.call(u)&&!function(t){return"[object Array]"===Object.prototype.toString.call(t)}(e))return{error:"inp is not an object or array"};var u;let i=ut(n,"useFormat",null);Tr(i)||(i=!1);let c="";try{c=i?JSON.stringify(e,null,2):JSON.stringify(e)}catch(t){o=t}return null!==o?{error:o}:Br(t,c,{fs:r})}function Jr(t){return function(t,r={}){let e=ut(r,"fs");return!!e.existsSync(t)&&!e.lstatSync(t).isDirectory()&&!e.lstatSync(t).isSymbolicLink()}(t,{fs:r})}let Lr=function(){let t=e.resolve(),r="AutoHotkey64.exe",n="";{let e=`${t}/AutoHotkey_2.0.19/`,o=`${t}/node_modules/w-mousekey/AutoHotkey_2.0.19/`;if(Jr(`${e}${r}`))n=e;else{if(!Jr(`${o}${r}`))throw new Error("can not find folder for AutoHotkey");n=o}}return{ahkExePath:`${n}/AutoHotkey64.exe`,ahkScriptPathClick:`${n}/zclick.ahk`,ahkScriptPathDrag:`${n}/zdrag.ahk`,ahkScriptPathSend:`${n}/zsend.ahk`,ahkScriptPathRecord:`${n}/zrecord.ahk`}}();return async r=>{let e=t.spawn(Lr.ahkExePath,["/force",Lr.ahkScriptPathRecord]),n=[],o=Date.now();e.stdout.on("data",t=>{let r=t.toString().trim().split("\\");for(let t of r)if(t.startsWith("Click")){let r=Et(t," ");if(yr(r)>=3){let t=Fr(ut(r,1)),e=Fr(ut(r,2)),u=Date.now(),i=u-o;o=u;let c={x:t,y:e,delay:i};n.push(c),console.log(`recorded: click at (${t}, ${e}), delay: ${i}ms`)}}}),e.stderr.on("data",t=>{console.error("AHK Error:",t.toString())}),process.on("SIGINT",async()=>{console.log("\nstopping recording..."),e.kill(),Gr(r,{steps:n},{useFormat:!0}),process.exit(0)}),await new Promise(()=>{})}});
//# sourceMappingURL=rec-scp.umd.js.map
