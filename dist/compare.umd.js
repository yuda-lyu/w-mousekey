/*!
 * compare v1.0.8
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("fs"),require("@u4/opencv4nodejs"),require("screenshot-desktop"),require("sharp")):"function"==typeof define&&define.amd?define(["fs","@u4/opencv4nodejs","screenshot-desktop","sharp"],r):(t="undefined"!=typeof globalThis?globalThis:t||self).compare=r(t.fs,t["@u4/opencv4nodejs"],t["screenshot-desktop"],t.sharp)}(this,function(t,r,e,n){"use strict";var o=Array.isArray,u="object"==typeof global&&global&&global.Object===Object&&global,i="object"==typeof self&&self&&self.Object===Object&&self,a=u||i||Function("return this")(),f=a.Symbol,c=Object.prototype,l=c.hasOwnProperty,s=c.toString,h=f?f.toStringTag:void 0;var g=Object.prototype.toString;var d=f?f.toStringTag:void 0;function b(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":d&&d in Object(t)?function(t){var r=l.call(t,h),e=t[h];try{t[h]=void 0;var n=!0}catch(t){}var o=s.call(t);return n&&(r?t[h]=e:delete t[h]),o}(t):function(t){return g.call(t)}(t)}function v(t){return null!=t&&"object"==typeof t}function p(t){return"symbol"==typeof t||v(t)&&"[object Symbol]"==b(t)}var y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w=/^\w*$/;function m(t,r){if(o(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!p(t))||(w.test(t)||!y.test(t)||null!=r&&t in Object(r))}function _(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}function j(t){if(!_(t))return!1;var r=b(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}var $,S=a["__core-js_shared__"],O=($=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"";var k=Function.prototype.toString;function x(t){if(null!=t){try{return k.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var E=/^\[object .+?Constructor\]$/,P=Function.prototype,A=Object.prototype,R=P.toString,H=A.hasOwnProperty,z=RegExp("^"+R.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function M(t){return!(!_(t)||(r=t,O&&O in r))&&(j(t)?z:E).test(x(t));var r}function F(t,r){var e=function(t,r){return null==t?void 0:t[r]}(t,r);return M(e)?e:void 0}var q=F(Object,"create");var T=Object.prototype.hasOwnProperty;var B=Object.prototype.hasOwnProperty;function C(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function N(t,r){return t===r||t!=t&&r!=r}function L(t,r){for(var e=t.length;e--;)if(N(t[e][0],r))return e;return-1}C.prototype.clear=function(){this.__data__=q?q(null):{},this.size=0},C.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},C.prototype.get=function(t){var r=this.__data__;if(q){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return T.call(r,t)?r[t]:void 0},C.prototype.has=function(t){var r=this.__data__;return q?void 0!==r[t]:B.call(r,t)},C.prototype.set=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=q&&void 0===r?"__lodash_hash_undefined__":r,this};var I=Array.prototype.splice;function D(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}D.prototype.clear=function(){this.__data__=[],this.size=0},D.prototype.delete=function(t){var r=this.__data__,e=L(r,t);return!(e<0)&&(e==r.length-1?r.pop():I.call(r,e,1),--this.size,!0)},D.prototype.get=function(t){var r=this.__data__,e=L(r,t);return e<0?void 0:r[e][1]},D.prototype.has=function(t){return L(this.__data__,t)>-1},D.prototype.set=function(t,r){var e=this.__data__,n=L(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};var U=F(a,"Map");function V(t,r){var e,n,o=t.__data__;return("string"==(n=typeof(e=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?o["string"==typeof r?"string":"hash"]:o.map}function G(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}G.prototype.clear=function(){this.size=0,this.__data__={hash:new C,map:new(U||D),string:new C}},G.prototype.delete=function(t){var r=V(this,t).delete(t);return this.size-=r?1:0,r},G.prototype.get=function(t){return V(this,t).get(t)},G.prototype.has=function(t){return V(this,t).has(t)},G.prototype.set=function(t,r){var e=V(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function W(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],u=e.cache;if(u.has(o))return u.get(o);var i=t.apply(this,n);return e.cache=u.set(o,i)||u,i};return e.cache=new(W.Cache||G),e}W.Cache=G;var J,K,Q,X=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/\\(\\)?/g,Z=(J=function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(X,function(t,e,n,o){r.push(n?o.replace(Y,"$1"):e||t)}),r},K=W(J,function(t){return 500===Q.size&&Q.clear(),t}),Q=K.cache,K),tt=Z;function rt(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o}var et=f?f.prototype:void 0,nt=et?et.toString:void 0;function ot(t){if("string"==typeof t)return t;if(o(t))return rt(t,ot)+"";if(p(t))return nt?nt.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}function ut(t){return null==t?"":ot(t)}function it(t,r){return o(t)?t:m(t,r)?[t]:tt(ut(t))}function at(t){if("string"==typeof t||p(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}function ft(t,r){for(var e=0,n=(r=it(r,t)).length;null!=t&&e<n;)t=t[at(r[e++])];return e&&e==n?t:void 0}function ct(t,r,e){var n=null==t?void 0:ft(t,r);return void 0===n?e:n}function lt(t){return!0===(r=t)||!1===r||v(r)&&"[object Boolean]"==b(r);var r}var st=/\s/;var ht=/^\s+/;function gt(t){return t?t.slice(0,function(t){for(var r=t.length;r--&&st.test(t.charAt(r)););return r}(t)+1).replace(ht,""):t}var dt=/^[-+]0x[0-9a-f]+$/i,bt=/^0b[01]+$/i,vt=/^0o[0-7]+$/i,pt=parseInt;function yt(t){if("number"==typeof t)return t;if(p(t))return NaN;if(_(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=_(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=gt(t);var e=bt.test(t);return e||vt.test(t)?pt(t.slice(2),e?2:8):dt.test(t)?NaN:+t}var wt=1/0;function mt(t){return t?(t=yt(t))===wt||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function _t(t){var r=mt(t),e=r%1;return r==r?e?r-e:r:0}function jt(t){return"[object String]"===Object.prototype.toString.call(t)}function $t(t){return!(!jt(t)||""===t)}function St(t){let r=!1;if($t(t))r=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(function(t){return t!=t}(t))return!1;r=!0}return r}function Ot(t){if(!St(t))return 0;return mt(t)}function kt(t){return!!St(t)&&(t=Ot(t),"number"==typeof(r=t)&&r==_t(r));var r}var xt=a.isFinite,Et=Math.min;var Pt=function(t){var r=Math[t];return function(t,e){if(t=yt(t),(e=null==e?0:Et(_t(e),292))&&xt(t)){var n=(ut(t)+"e").split("e");return+((n=(ut(r(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}("round"),At=Pt;function Rt(t){if(!St(t))return 0;t=Ot(t);let r=At(t);return"0"===String(r)?0:r}function Ht(t){if(!kt(t))return!1;return Rt(t)>0}function zt(t,r,e){var n=t.length;return e=void 0===e?n:e,!r&&e>=n?t:function(t,r,e){var n=-1,o=t.length;r<0&&(r=-r>o?0:o+r),(e=e>o?o:e)<0&&(e+=o),o=r>e?0:e-r>>>0,r>>>=0;for(var u=Array(o);++n<o;)u[n]=t[n+r];return u}(t,r,e)}function Mt(t){return t!=t}function Ft(t,r,e){return r==r?function(t,r,e){for(var n=e-1,o=t.length;++n<o;)if(t[n]===r)return n;return-1}(t,r,e):function(t,r,e,n){for(var o=t.length,u=e+(n?1:-1);n?u--:++u<o;)if(r(t[u],u,t))return u;return-1}(t,Mt,e)}var qt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Tt(t){return qt.test(t)}var Bt="\\ud800-\\udfff",Ct="["+Bt+"]",Nt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Lt="\\ud83c[\\udffb-\\udfff]",It="[^"+Bt+"]",Dt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ut="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="(?:"+Nt+"|"+Lt+")"+"?",Gt="[\\ufe0e\\ufe0f]?",Wt=Gt+Vt+("(?:\\u200d(?:"+[It,Dt,Ut].join("|")+")"+Gt+Vt+")*"),Jt="(?:"+[It+Nt+"?",Nt,Dt,Ut,Ct].join("|")+")",Kt=RegExp(Lt+"(?="+Lt+")|"+Jt+Wt,"g");function Qt(t){return Tt(t)?function(t){return t.match(Kt)||[]}(t):function(t){return t.split("")}(t)}function Xt(t,r,e){if((t=ut(t))&&(e||void 0===r))return gt(t);if(!t||!(r=ot(r)))return t;var n=Qt(t),o=Qt(r),u=function(t,r){for(var e=-1,n=t.length;++e<n&&Ft(r,t[e],0)>-1;);return e}(n,o),i=function(t,r){for(var e=t.length;e--&&Ft(r,t[e],0)>-1;);return e}(n,o)+1;return zt(n,u,i).join("")}function Yt(t){var r=this.__data__=new D(t);this.size=r.size}Yt.prototype.clear=function(){this.__data__=new D,this.size=0},Yt.prototype.delete=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e},Yt.prototype.get=function(t){return this.__data__.get(t)},Yt.prototype.has=function(t){return this.__data__.has(t)},Yt.prototype.set=function(t,r){var e=this.__data__;if(e instanceof D){var n=e.__data__;if(!U||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new G(n)}return e.set(t,r),this.size=e.size,this};function Zt(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new G;++r<e;)this.add(t[r])}function tr(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function rr(t,r){return t.has(r)}Zt.prototype.add=Zt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Zt.prototype.has=function(t){return this.__data__.has(t)};function er(t,r,e,n,o,u){var i=1&e,a=t.length,f=r.length;if(a!=f&&!(i&&f>a))return!1;var c=u.get(t),l=u.get(r);if(c&&l)return c==r&&l==t;var s=-1,h=!0,g=2&e?new Zt:void 0;for(u.set(t,r),u.set(r,t);++s<a;){var d=t[s],b=r[s];if(n)var v=i?n(b,d,s,r,t,u):n(d,b,s,t,r,u);if(void 0!==v){if(v)continue;h=!1;break}if(g){if(!tr(r,function(t,r){if(!rr(g,r)&&(d===t||o(d,t,e,n,u)))return g.push(r)})){h=!1;break}}else if(d!==b&&!o(d,b,e,n,u)){h=!1;break}}return u.delete(t),u.delete(r),h}var nr=a.Uint8Array;function or(t){var r=-1,e=Array(t.size);return t.forEach(function(t,n){e[++r]=[n,t]}),e}function ur(t){var r=-1,e=Array(t.size);return t.forEach(function(t){e[++r]=t}),e}var ir=f?f.prototype:void 0,ar=ir?ir.valueOf:void 0;function fr(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}var cr=Object.prototype.propertyIsEnumerable,lr=Object.getOwnPropertySymbols,sr=lr?function(t){return null==t?[]:(t=Object(t),function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,u=[];++e<n;){var i=t[e];r(i,e,t)&&(u[o++]=i)}return u}(lr(t),function(r){return cr.call(t,r)}))}:function(){return[]},hr=sr;function gr(t){return v(t)&&"[object Arguments]"==b(t)}var dr=Object.prototype,br=dr.hasOwnProperty,vr=dr.propertyIsEnumerable,pr=gr(function(){return arguments}())?gr:function(t){return v(t)&&br.call(t,"callee")&&!vr.call(t,"callee")},yr=pr;var wr="object"==typeof exports&&exports&&!exports.nodeType&&exports,mr=wr&&"object"==typeof module&&module&&!module.nodeType&&module,_r=mr&&mr.exports===wr?a.Buffer:void 0,jr=(_r?_r.isBuffer:void 0)||function(){return!1},$r=/^(?:0|[1-9]\d*)$/;function Sr(t,r){var e=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&$r.test(t))&&t>-1&&t%1==0&&t<r}function Or(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var kr={};function xr(t){return function(r){return t(r)}}kr["[object Float32Array]"]=kr["[object Float64Array]"]=kr["[object Int8Array]"]=kr["[object Int16Array]"]=kr["[object Int32Array]"]=kr["[object Uint8Array]"]=kr["[object Uint8ClampedArray]"]=kr["[object Uint16Array]"]=kr["[object Uint32Array]"]=!0,kr["[object Arguments]"]=kr["[object Array]"]=kr["[object ArrayBuffer]"]=kr["[object Boolean]"]=kr["[object DataView]"]=kr["[object Date]"]=kr["[object Error]"]=kr["[object Function]"]=kr["[object Map]"]=kr["[object Number]"]=kr["[object Object]"]=kr["[object RegExp]"]=kr["[object Set]"]=kr["[object String]"]=kr["[object WeakMap]"]=!1;var Er="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pr=Er&&"object"==typeof module&&module&&!module.nodeType&&module,Ar=Pr&&Pr.exports===Er&&u.process,Rr=function(){try{var t=Pr&&Pr.require&&Pr.require("util").types;return t||Ar&&Ar.binding&&Ar.binding("util")}catch(t){}}(),Hr=Rr&&Rr.isTypedArray,zr=Hr?xr(Hr):function(t){return v(t)&&Or(t.length)&&!!kr[b(t)]},Mr=Object.prototype.hasOwnProperty;function Fr(t,r){var e=o(t),n=!e&&yr(t),u=!e&&!n&&jr(t),i=!e&&!n&&!u&&zr(t),a=e||n||u||i,f=a?function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}(t.length,String):[],c=f.length;for(var l in t)!r&&!Mr.call(t,l)||a&&("length"==l||u&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Sr(l,c))||f.push(l);return f}var qr=Object.prototype;var Tr=function(t,r){return function(e){return t(r(e))}}(Object.keys,Object),Br=Tr,Cr=Object.prototype.hasOwnProperty;function Nr(t){if(e=(r=t)&&r.constructor,r!==("function"==typeof e&&e.prototype||qr))return Br(t);var r,e,n=[];for(var o in Object(t))Cr.call(t,o)&&"constructor"!=o&&n.push(o);return n}function Lr(t){return null!=t&&Or(t.length)&&!j(t)}function Ir(t){return Lr(t)?Fr(t):Nr(t)}function Dr(t){return function(t,r,e){var n=r(t);return o(t)?n:fr(n,e(t))}(t,Ir,hr)}var Ur=Object.prototype.hasOwnProperty;var Vr=F(a,"DataView"),Gr=F(a,"Promise"),Wr=F(a,"Set"),Jr=F(a,"WeakMap"),Kr="[object Map]",Qr="[object Promise]",Xr="[object Set]",Yr="[object WeakMap]",Zr="[object DataView]",te=x(Vr),re=x(U),ee=x(Gr),ne=x(Wr),oe=x(Jr),ue=b;(Vr&&ue(new Vr(new ArrayBuffer(1)))!=Zr||U&&ue(new U)!=Kr||Gr&&ue(Gr.resolve())!=Qr||Wr&&ue(new Wr)!=Xr||Jr&&ue(new Jr)!=Yr)&&(ue=function(t){var r=b(t),e="[object Object]"==r?t.constructor:void 0,n=e?x(e):"";if(n)switch(n){case te:return Zr;case re:return Kr;case ee:return Qr;case ne:return Xr;case oe:return Yr}return r});var ie=ue,ae="[object Arguments]",fe="[object Array]",ce="[object Object]",le=Object.prototype.hasOwnProperty;function se(t,r,e,n,u,i){var a=o(t),f=o(r),c=a?fe:ie(t),l=f?fe:ie(r),s=(c=c==ae?ce:c)==ce,h=(l=l==ae?ce:l)==ce,g=c==l;if(g&&jr(t)){if(!jr(r))return!1;a=!0,s=!1}if(g&&!s)return i||(i=new Yt),a||zr(t)?er(t,r,e,n,u,i):function(t,r,e,n,o,u,i){switch(e){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!u(new nr(t),new nr(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return N(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var a=or;case"[object Set]":var f=1&n;if(a||(a=ur),t.size!=r.size&&!f)return!1;var c=i.get(t);if(c)return c==r;n|=2,i.set(t,r);var l=er(a(t),a(r),n,o,u,i);return i.delete(t),l;case"[object Symbol]":if(ar)return ar.call(t)==ar.call(r)}return!1}(t,r,c,e,n,u,i);if(!(1&e)){var d=s&&le.call(t,"__wrapped__"),b=h&&le.call(r,"__wrapped__");if(d||b){var v=d?t.value():t,p=b?r.value():r;return i||(i=new Yt),u(v,p,e,n,i)}}return!!g&&(i||(i=new Yt),function(t,r,e,n,o,u){var i=1&e,a=Dr(t),f=a.length;if(f!=Dr(r).length&&!i)return!1;for(var c=f;c--;){var l=a[c];if(!(i?l in r:Ur.call(r,l)))return!1}var s=u.get(t),h=u.get(r);if(s&&h)return s==r&&h==t;var g=!0;u.set(t,r),u.set(r,t);for(var d=i;++c<f;){var b=t[l=a[c]],v=r[l];if(n)var p=i?n(v,b,l,r,t,u):n(b,v,l,t,r,u);if(!(void 0===p?b===v||o(b,v,e,n,u):p)){g=!1;break}d||(d="constructor"==l)}if(g&&!d){var y=t.constructor,w=r.constructor;y==w||!("constructor"in t)||!("constructor"in r)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(g=!1)}return u.delete(t),u.delete(r),g}(t,r,e,n,u,i))}function he(t,r,e,n,o){return t===r||(null==t||null==r||!v(t)&&!v(r)?t!=t&&r!=r:se(t,r,e,n,he,o))}function ge(t){return t==t&&!_(t)}function de(t,r){return function(e){return null!=e&&(e[t]===r&&(void 0!==r||t in Object(e)))}}function be(t){var r=function(t){for(var r=Ir(t),e=r.length;e--;){var n=r[e],o=t[n];r[e]=[n,o,ge(o)]}return r}(t);return 1==r.length&&r[0][2]?de(r[0][0],r[0][1]):function(e){return e===t||function(t,r,e,n){var o=e.length,u=o,i=!n;if(null==t)return!u;for(t=Object(t);o--;){var a=e[o];if(i&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<u;){var f=(a=e[o])[0],c=t[f],l=a[1];if(i&&a[2]){if(void 0===c&&!(f in t))return!1}else{var s=new Yt;if(n)var h=n(c,l,f,t,r,s);if(!(void 0===h?he(l,c,3,n,s):h))return!1}}return!0}(e,t,r)}}function ve(t,r){return null!=t&&r in Object(t)}function pe(t,r){return null!=t&&function(t,r,e){for(var n=-1,u=(r=it(r,t)).length,i=!1;++n<u;){var a=at(r[n]);if(!(i=null!=t&&e(t,a)))break;t=t[a]}return i||++n!=u?i:!!(u=null==t?0:t.length)&&Or(u)&&Sr(a,u)&&(o(t)||yr(t))}(t,r,ve)}function ye(t){return t}function we(t){return function(r){return null==r?void 0:r[t]}}function me(t){return m(t)?we(at(t)):function(t){return function(r){return ft(r,t)}}(t)}function _e(t){return"function"==typeof t?t:null==t?ye:"object"==typeof t?o(t)?(r=t[0],e=t[1],m(r)&&ge(e)?de(at(r),e):function(t){var n=ct(t,r);return void 0===n&&n===e?pe(t,r):he(e,n,3)}):be(t):me(t);var r,e}var je,$e=function(t,r,e){for(var n=-1,o=Object(t),u=e(t),i=u.length;i--;){var a=u[je?i:++n];if(!1===r(o[a],a,o))break}return t};var Se=function(t,r){return function(e,n){if(null==e)return e;if(!Lr(e))return t(e,n);for(var o=e.length,u=r?o:-1,i=Object(e);(r?u--:++u<o)&&!1!==n(i[u],u,i););return e}}(function(t,r){return t&&$e(t,r,Ir)}),Oe=Se;function ke(t,r){var e=-1,n=Lr(t)?Array(t.length):[];return Oe(t,function(t,o,u){n[++e]=r(t,o,u)}),n}function xe(t,r){return(o(t)?rt:ke)(t,_e(r))}function Ee(t,r){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==r(t[e],e,t););return t}function Pe(t,r){var e;return(o(t)?Ee:Oe)(t,"function"==typeof(e=r)?e:ye)}var Ae=we("length"),Re="\\ud800-\\udfff",He="["+Re+"]",ze="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Me="\\ud83c[\\udffb-\\udfff]",Fe="[^"+Re+"]",qe="(?:\\ud83c[\\udde6-\\uddff]){2}",Te="[\\ud800-\\udbff][\\udc00-\\udfff]",Be="(?:"+ze+"|"+Me+")"+"?",Ce="[\\ufe0e\\ufe0f]?",Ne=Ce+Be+("(?:\\u200d(?:"+[Fe,qe,Te].join("|")+")"+Ce+Be+")*"),Le="(?:"+[Fe+ze+"?",ze,qe,Te,He].join("|")+")",Ie=RegExp(Me+"(?="+Me+")|"+Le+Ne,"g");function De(t){return Tt(t)?function(t){for(var r=Ie.lastIndex=0;Ie.test(t);)++r;return r}(t):Ae(t)}function Ue(t){if(null==t)return 0;if(Lr(t))return"string"==typeof(r=t)||!o(r)&&v(r)&&"[object String]"==b(r)?De(t):t.length;var r,e=ie(t);return"[object Map]"==e||"[object Set]"==e?t.size:Nr(t).length}var Ve=f?f.isConcatSpreadable:void 0;function Ge(t){return o(t)||yr(t)||!!(Ve&&t&&t[Ve])}function We(t,r,e,n,o){var u=-1,i=t.length;for(e||(e=Ge),o||(o=[]);++u<i;){var a=t[u];r>0&&e(a)?r>1?We(a,r-1,e,n,o):fr(o,a):n||(o[o.length]=a)}return o}function Je(t,r){if(t!==r){var e=void 0!==t,n=null===t,o=t==t,u=p(t),i=void 0!==r,a=null===r,f=r==r,c=p(r);if(!a&&!c&&!u&&t>r||u&&i&&f&&!a&&!c||n&&i&&f||!e&&f||!o)return 1;if(!n&&!u&&!c&&t<r||c&&e&&o&&!n&&!u||a&&e&&o||!i&&o||!f)return-1}return 0}function Ke(t,r,e){r=r.length?rt(r,function(t){return o(t)?function(r){return ft(r,1===t.length?t[0]:t)}:t}):[ye];var n=-1;return r=rt(r,xr(_e)),function(t,r){var e=t.length;for(t.sort(r);e--;)t[e]=t[e].value;return t}(ke(t,function(t,e,o){return{criteria:rt(r,function(r){return r(t)}),index:++n,value:t}}),function(t,r){return function(t,r,e){for(var n=-1,o=t.criteria,u=r.criteria,i=o.length,a=e.length;++n<i;){var f=Je(o[n],u[n]);if(f)return n>=a?f:f*("desc"==e[n]?-1:1)}return t.index-r.index}(t,r,e)})}var Qe=Math.max;var Xe=function(){try{var t=F(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ye=Xe,Ze=Ye?function(t,r){return Ye(t,"toString",{configurable:!0,enumerable:!1,value:(e=r,function(){return e}),writable:!0});var e}:ye,tn=Ze,rn=Date.now;var en=function(t){var r=0,e=0;return function(){var n=rn(),o=16-(n-e);if(e=n,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}(tn),nn=en;function on(t,r,e){if(!_(e))return!1;var n=typeof r;return!!("number"==n?Lr(e)&&Sr(r,e.length):"string"==n&&r in e)&&N(e[r],t)}var un=function(t,r){return nn(function(t,r,e){return r=Qe(void 0===r?t.length-1:r,0),function(){for(var n=arguments,o=-1,u=Qe(n.length-r,0),i=Array(u);++o<u;)i[o]=n[r+o];o=-1;for(var a=Array(r+1);++o<r;)a[o]=n[o];return a[r]=e(i),function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}(t,this,a)}}(t,r,ye),t+"")}(function(t,r){if(null==t)return[];var e=r.length;return e>1&&on(t,r[0],r[1])?r=[]:e>2&&on(r[0],r[1],r[2])&&(r=[r[0]]),Ke(t,We(r,1),[])}),an=un;function fn(t){return ut(t).toLowerCase()}function cn(t){return ut(t).toUpperCase()}function ln(t){return"[object Object]"===Object.prototype.toString.call(t)}function sn(t){if(ln(t)){for(let r in t)return!0;return!1}return!1}function hn(t){if(!kt(t))return!1;return Rt(t)>=0}function gn(t,r){return $t(t)&&hn(r)?0===(r=Rt(r))?"":t.substring(0,r):""}function dn(t,r){return $t(t)&&hn(r)?0===(r=Rt(r))?t:function(t,r){if(!$t(t))return"";if(!hn(r))return"";if(0===(r=Rt(r)))return"";let e=t.length-r;return e<0&&(e=0),t.substring(e,e+r)}(t,t.length-r):""}function bn(t,r,e){if(!$t(t))return"";if(!$t(r))return"";if(!jt(e))return"";return String(t).replaceAll(r,e)}function vn(t,r){if(!$t(t))return[];if(!$t(r))return[];let e=function(t,r){return $t(t)&&$t(r)?t.split(r):[]}(t,r);e=xe(e,Xt);let n=[];return Pe(e,function(t){$t(t)&&n.push(t)}),n}function pn(t){if(!$t(t)&&!St(t)&&!p(t))return"";let r="";try{r=String(t)}catch(t){}try{r=t.toString()}catch(t){}return r}function yn(t,r){return!!ln(t)&&(!(!$t(r)&&!St(r))&&r in t)}function wn(t,r,e=1){return $t(t)&&hn(r)?(e=Ht(e)?Rt(e):1,t.substring(r,r+e)):""}let mn={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function _n(t){return $n(t,1)}function jn(t){return $n(t,360)}function $n(t,r=1){if(t.indexOf("%")>=0){if(!St(t=bn(t,"%","")))throw new Error("invalid color: value is not a number");t=Ot(t)/100}else{if(!St(t))throw new Error("invalid color: value is not a number");t=Ot(t)/r}if(t>1)throw new Error("invalid color: value > 1");if(t<0)throw new Error("invalid color: value < 0");return t}function Sn(t){if(!St(t))throw new Error("invalid color: value is not a number");if((t=Ot(t))>1)throw new Error("invalid color: value > 1");if(t<0)throw new Error("invalid color: value < 0");return t}function On(t,r="rgba"){if(e=t,"[object Array]"!==Object.prototype.toString.call(e))throw new Error("invalid colors array");var e;let n=ct(t,0,0),o=ct(t,1,0),u=ct(t,2,0),i=ct(t,3,1);if(4!==Ue(r=r.split("")))throw new Error("tar.length !== 4");let a=ct(r,0),f=ct(r,1),c=ct(r,2),l=ct(r,3);return{[a]:n,[f]:o,[c]:u,[l]:i}}function kn(t){let r=(t=dn(t,1)).length;if(2===r)t=`${t}${t}${t}ff`;else if(3===r){let r=wn(t,0,1),e=wn(t,1,1),n=wn(t,2,1);t=`${r}${r}${e}${e}${n}${n}ff`}else if(6===r)t=`${t}ff`;else if(8!==r)throw new Error("invalid hex color");function e(t){if(2!==t.length)throw new Error("hex.length of color is not equal to 2");if(!St(t=parseInt(t,16)))throw new Error("invalid hex of color");return(t=Ot(t))/255}return{r:e(wn(t,0,2)),g:e(wn(t,2,2)),b:e(wn(t,4,2)),a:e(wn(t,6,2))}}function xn(t){return t=On(t=xe(t,(t,r)=>r<=2?$n(t,255):3===r?Sn(t):null),"rgba")}function En(t){return t=qn(t=On(t=xe(t,(t,r)=>0===r?jn(t):1===r||2===r?_n(t):3===r?Sn(t):null),"hsla"))}function Pn(t){return t=Tn(t=On(t=xe(t,(t,r)=>0===r?jn(t):1===r||2===r?_n(t):3===r?Sn(t):null),"hsva"))}function An(t){if("transparent"===t)return{r:0,g:0,b:0,a:0};if(function(t){return yn(mn,t)}(t))return kn(t=`#${mn[t]}`);if(function(t){return"#"===gn(t,1)&&(!!/[0-9A-Fa-f]{2}/g.test(t)||(!!/[0-9A-Fa-f]{3}/g.test(t)||(!!/[0-9A-Fa-f]{6}/g.test(t)||!!/[0-9A-Fa-f]{8}/g.test(t))))}(t))return kn(t);if(function(t){return"rgb"===gn(t,3)||"rgba"===gn(t,4)}(t))return function(t){return t=bn(t,"rgba",""),t=bn(t,"rgb",""),xn(vn(t=bn(t=t.replace(/[()]/g,""),","," ")," "))}(t);if(function(t){return"hsl"===gn(t,3)||"hsla"===gn(t,4)}(t))return function(t){return t=bn(t,"hsla",""),t=bn(t,"hsl",""),En(vn(t=bn(t=t.replace(/[()]/g,""),","," ")," "))}(t);if(function(t){return"hsv"===gn(t,3)||"hsva"===gn(t,4)}(t))return function(t){return t=bn(t,"hsva",""),t=bn(t,"hsv",""),Pn(vn(t=bn(t=t.replace(/[()]/g,""),","," ")," "))}(t);throw new Error("format of color string is not hex-color, name-color, rgba, hsla, hsva")}function Rn(t,r){return!!yn(t,r=fn(r))||!!yn(t,r=cn(r))}function Hn(t,r,e){let n;return n=ct(t,r,null),null!==n?n:(n=ct(t,r=cn(r),null),null!==n?n:e)}function zn(t){if(function(t){let r=Rn(t,"r"),e=Rn(t,"g"),n=Rn(t,"b");return r&&e&&n}(t))return function(t){let r=[Hn(t,"r",null),Hn(t,"g",null),Hn(t,"b",null),Hn(t,"a",1)];return r=xe(r,pn),xn(r)}(t);if(function(t){let r=Rn(t,"h"),e=Rn(t,"s"),n=Rn(t,"l");return r&&e&&n}(t))return function(t){let r=[Hn(t,"h",null),Hn(t,"s",null),Hn(t,"l",null),Hn(t,"a",1)];return r=xe(r,pn),En(r)}(t);if(function(t){let r=Rn(t,"h"),e=Rn(t,"s"),n=Rn(t,"v");return r&&e&&n}(t))return function(t){let r=[Hn(t,"h",null),Hn(t,"s",null),Hn(t,"v",null),Hn(t,"a",1)];return r=xe(r,pn),Pn(r)}(t);throw new Error("color object is not one of rgba, hsla, hsva")}function Mn(t){let r,e,n=t.r,o=t.g,u=t.b,i=Math.max(n,o,u),a=Math.min(n,o,u),f=(i+a)/2;if(i===a)r=e=0;else{let t=i-a;switch(e=f>.5?t/(2-i-a):t/(i+a),i){case n:r=(o-u)/t+(o<u?6:0);break;case o:r=(u-n)/t+2;break;case u:r=(n-o)/t+4}r/=6}return{h:r,s:e,l:f,a:t.a}}function Fn(t){let r,e,n=t.r,o=t.g,u=t.b,i=Math.max(n,o,u),a=Math.min(n,o,u),f=i,c=i-a;if(e=0===i?0:c/i,i===a)r=0;else{switch(i){case n:r=(o-u)/c+(o<u?6:0);break;case o:r=(u-n)/c+2;break;case u:r=(n-o)/c+4}r/=6}return{h:r,s:e,v:f,a:t.a}}function qn(t){let r,e,n,o=t.h,u=t.s,i=t.l;function a(t,r,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(r-t)*e:e<.5?r:e<2/3?t+(r-t)*(2/3-e)*6:t}if(0===u)r=e=n=i;else{let t=i<.5?i*(1+u):i+u-i*u,f=2*i-t;r=a(f,t,o+1/3),e=a(f,t,o),n=a(f,t,o-1/3)}return{r:r,g:e,b:n,a:t.a}}function Tn(t){let r,e,n,o=t.h,u=t.s,i=t.v,a=Math.floor(6*o),f=6*o-a,c=i*(1-u),l=i*(1-f*u),s=i*(1-(1-f)*u);switch(a%6){case 0:r=i,e=s,n=c;break;case 1:r=l,e=i,n=c;break;case 2:r=c,e=i,n=s;break;case 3:r=c,e=l,n=i;break;case 4:r=s,e=c,n=i;break;case 5:r=i,e=c,n=l}return{r:r,g:e,b:n,a:t.a}}function Bn(t){let r=Math.round(255*t).toString(16);if(1===r.length)return`0${r}`;if(2===r.length)return r;throw new Error("invalid value")}function Cn(t,r=!0){let e=t.r,n=t.g,o=t.b,u=t.a,i=`${Bn(e)}${Bn(n)}${Bn(o)}`;return r&&(i=`${i}${Bn(u)}`),i}function Nn(t){return Math.min(1,Math.max(0,t))}function Ln(t,r){if(!$t(r))throw new Error("fmtOutput is not a string");if(!jo[r])throw console.log(`fmtOutput must be [${Ir(jo)}]`),new Error("invalid fmtOutput");return t=jo[r](t)}function In(t,r,e="toRgbString"){if(r<0||r>1)throw new Error("amount < 0 or > 1");let n=Mn(t);return n.h+=r,n.h=n.h%1,Ln(qn(n),e)}function Dn(t,r,e,n,o="toRgbString"){if(r<0||r>1)throw new Error("w1 < 0 or > 1");if(n<0||n>1)throw new Error("w1 < 0 or > 1");return Ln({r:t.r*r+e.r*n,g:t.g*r+e.g*n,b:t.b*r+e.b*n,a:t.a*r+e.a*n},o)}function Un(t){return`${At(100*t,1)}%`}function Vn(t){return At(t,0)}function Gn(t){return At(t,3)}function Wn(t){return{r:Vn(255*t.r),g:Vn(255*t.g),b:Vn(255*t.b)}}function Jn(t){return`rgb(${Vn(255*t.r)}, ${Vn(255*t.g)}, ${Vn(255*t.b)})`}function Kn(t){return{r:Vn(255*t.r),g:Vn(255*t.g),b:Vn(255*t.b),a:Gn(t.a)}}function Qn(t){return`rgba(${Vn(255*t.r)}, ${Vn(255*t.g)}, ${Vn(255*t.b)}, ${Gn(t.a)})`}function Xn(t){let r=Mn(t);return{h:Vn(360*r.h),s:Gn(r.s),l:Gn(r.l)}}function Yn(t){let r=Mn(t);return`hsl(${Vn(360*r.h)}, ${Gn(r.s)}, ${Gn(r.l)})`}function Zn(t){let r=Mn(t);return{h:Vn(360*r.h),s:Gn(r.s),l:Gn(r.l),a:Gn(r.a)}}function to(t){let r=Mn(t);return`hsla(${Vn(360*r.h)}, ${Gn(r.s)}, ${Gn(r.l)}, ${Gn(r.a)})`}function ro(t){let r=Fn(t);return{h:Vn(360*r.h),s:Gn(r.s),v:Gn(r.v)}}function eo(t){let r=Fn(t);return`hsv(${Vn(360*r.h)}, ${Gn(r.s)}, ${Gn(r.v)})`}function no(t){let r=Fn(t);return{h:Vn(360*r.h),s:Gn(r.s),v:Gn(r.v),a:Gn(r.a)}}function oo(t){let r=Fn(t);return`hsva(${Vn(360*r.h)}, ${Gn(r.s)}, ${Gn(r.v)}, ${Gn(r.a)})`}function uo(t){return{r:Un(t.r),g:Un(t.g),b:Un(t.b)}}function io(t){return`rgb(${Un(t.r)}, ${Un(t.g)}, ${Un(t.b)})`}function ao(t){return{r:Un(t.r),g:Un(t.g),b:Un(t.b),a:Gn(t.a)}}function fo(t){return`rgba(${Un(t.r)}, ${Un(t.g)}, ${Un(t.b)}, ${Gn(t.a)})`}function co(t){let r=Mn(t);return{h:Vn(360*r.h),s:Un(r.s),l:Un(r.l)}}function lo(t){let r=Mn(t);return`hsl(${Vn(360*r.h)}, ${Un(r.s)}, ${Un(r.l)})`}function so(t){let r=Mn(t);return{h:Vn(360*r.h),s:Un(r.s),l:Un(r.l),a:Gn(r.a)}}function ho(t){let r=Mn(t);return`hsla(${Vn(360*r.h)}, ${Un(r.s)}, ${Un(r.l)}, ${Gn(r.a)})`}function go(t){let r=Fn(t);return{h:Vn(360*r.h),s:Un(r.s),v:Un(r.v)}}function bo(t){let r=Fn(t);return`hsv(${Vn(360*r.h)}, ${Un(r.s)}, ${Un(r.v)})`}function vo(t){let r=Fn(t);return{h:Vn(360*r.h),s:Un(r.s),v:Un(r.v),a:Gn(r.a)}}function po(t){let r=Fn(t);return`hsva(${Vn(360*r.h)}, ${Un(r.s)}, ${Un(r.v)}, ${Gn(r.a)})`}function yo(t){let r=function(t){return Cn(t,!1)}(t);return`#${r}`}function wo(t){return`#${Cn(t)}`}function mo(t){let r=null,e=null,n=null;if($t(t))r=fn(Xt(t));else{if(!sn(t))throw console.log("color=",t),new Error("color is not a string or an object");e=t}if(null!==r)try{n=An(r)}catch(t){throw console.log(t),new Error(`can not parse color: ${r}`)}else if(null!==e)try{n=zn(e)}catch(t){throw console.log(t),new Error(`can not parse color: ${JSON.stringify(e)}`)}return n}function _o(t){if(!sn(t))return console.log("gradient is not an effective object"),t=>`rgb(${255*(t=Math.min(Math.max(t,0),1))},${255*t},${255*t})`;let r=[];return Pe(t,(t,e)=>{r.push([Ot(e),Kn(mo(t)),t])}),r=an(r,0),function(t){let e=null;for(let n=1;n<r.length;n++){let o=r[n-1][0],u=r[n-1][1],i=r[n][0],a=r[n][1];if(o<=t&&i>=t){let r=(i-t)/(i-o),n=(t-o)/(i-o);e=Dn(mo(u),r,mo(a),n,"toRgbaString");break}}return e}}let jo={toRgb:Wn,toRgbString:Jn,toRgba:Kn,toRgbaString:Qn,toHsl:Xn,toHslString:Yn,toHsla:Zn,toHslaString:to,toHsv:ro,toHsvString:eo,toHsva:no,toHsvaString:oo,toRgbP:uo,toRgbPString:io,toRgbaP:ao,toRgbaPString:fo,toHslP:co,toHslPString:lo,toHslaP:so,toHslaPString:ho,toHsvP:go,toHsvPString:bo,toHsvaP:vo,toHsvaPString:po,toHexString:yo,toHex8String:wo};var $o={toRgb:t=>Wn(mo(t)),toRgbString:t=>Jn(mo(t)),toRgba:t=>Kn(mo(t)),toRgbaString:t=>Qn(mo(t)),toHsl:t=>Xn(mo(t)),toHslString:t=>Yn(mo(t)),toHsla:t=>Zn(mo(t)),toHslaString:t=>to(mo(t)),toHsv:t=>ro(mo(t)),toHsvString:t=>eo(mo(t)),toHsva:t=>no(mo(t)),toHsvaString:t=>oo(mo(t)),toRgbP:t=>uo(mo(t)),toRgbPString:t=>io(mo(t)),toRgbaP:t=>ao(mo(t)),toRgbaPString:t=>fo(mo(t)),toHslP:t=>co(mo(t)),toHslPString:t=>lo(mo(t)),toHslaP:t=>so(mo(t)),toHslaPString:t=>ho(mo(t)),toHsvP:t=>go(mo(t)),toHsvPString:t=>bo(mo(t)),toHsvaP:t=>vo(mo(t)),toHsvaPString:t=>po(mo(t)),toHexString:t=>yo(mo(t)),toHex8String:t=>wo(mo(t)),modSaturate:(t,r,e)=>function(t,r,e="toRgbString"){if(r<0||r>1)throw new Error("amount < 0 or > 1");let n=Mn(t);return n.s+=r,n.s=Nn(n.s),Ln(qn(n),e)}(mo(t),r,e),modGrey:(t,r)=>function(t,r="toRgbString"){let e=Mn(t);return e.s=0,Ln(qn(e),r)}(mo(t),r),modLighten:(t,r,e)=>function(t,r,e="toRgbString"){if(r<0||r>1)throw new Error("amount < 0 or > 1");let n=Mn(t);return n.l+=r,n.l=Nn(n.l),Ln(qn(n),e)}(mo(t),r,e),modBrighten:(t,r,e)=>function(t,r,e="toRgbString"){if(r<0||r>1)throw new Error("amount < 0 or > 1");return t.r+=r,t.r=Nn(t.r),t.g+=r,t.g=Nn(t.g),t.b+=r,t.b=Nn(t.b),Ln(t,e)}(mo(t),r,e),modHue:(t,r,e)=>In(mo(t),r,e),modComplement:(t,r)=>function(t,r="toRgbString"){return In(t,.5,r)}(mo(t),r),spreadHue:(t,r,e)=>function(t,r,e="toRgbString"){if(!kt(r))throw new Error("num is not an integer");if((r=Rt(r))<=1)return[t];let n=Mn(t),o=1/r,u=[];for(let t=0;t<r;t++)u.push(Ln(qn(n),e)),n.h+=o,n.h=n.h%1;return u}(mo(t),r,e),spreadMonochromatic:(t,r,e)=>function(t,r,e="toRgbString"){if(!kt(r))throw new Error("num is not an integer");if((r=Rt(r))<=1)return[t];let n=Fn(t);n.s=1,n.l=1;let o=1/r,u=[];for(let t=0;t<r;t++)u.push(Ln(Tn(n),e)),n.h-=o,n.l-=o;return u}(mo(t),r,e),mix:(t,r,e,n,o)=>Dn(mo(t),r,mo(e),n,o),getBrightness:t=>function(t){if(1!==t.a)throw new Error("alpha of color can not be equal to 1");return(299*t.r+587*t.g+114*t.b)/1e3}(mo(t)),getLuminance:t=>function(t){if(1!==t.a)throw new Error("alpha of color can not be equal to 1");let r,e,n,o=t.r,u=t.g,i=t.b;return r=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),e=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4),n=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),.2126*r+.7152*e+.0722*n}(mo(t)),interp:_o};let So={screenFull:async function(){return await e({format:"png"})},screen:async function(t,r,o,u){let i=await e({format:"png"});return await n(i).extract({left:t,top:r,width:o,height:u}).toBuffer()},screenFullSave:async function(r){let n=await e({format:"png"});return t.writeFileSync(r,n),n},screenSave:async function(r,o,u,i,a){let f=await e({format:"png"}),c=await n(f).extract({left:r,top:o,width:u,height:i}).toBuffer();return t.writeFileSync(a,c),c}};async function Oo(e){let n=t.readFileSync(e);return r.imdecode(n)}async function ko(e,n){let o=r.imencode(".png",n);t.writeFileSync(e,o)}async function xo(t,e,n,o={}){let u=ct(o,"useToGray");lt(u)||(u=!1);let i=t.resize(Math.floor(t.rows*n),Math.floor(t.cols*n));if(i.rows<10||i.cols<10)throw new Error(`縮放後檢測尺寸過小: [imgTarResize:${i.cols}x${i.rows}]`);if(i.rows>e.rows||i.cols>e.cols)throw new Error(`縮放後檢測>截圖尺寸: [imgScreen:${e.cols}x${e.rows}] > [imgTarResize:${i.cols}x${i.rows}]`);u&&(e=e.bgrToGray(),i=i.bgrToGray());let a=e.matchTemplate(i,r.TM_CCOEFF_NORMED),{maxVal:f,maxLoc:c}=a.minMaxLoc();return{similarity:f,x:c.x,y:c.y,width:i.cols,height:i.rows,scale:n}}return{calcSimilarity:async function(t,r,e,n={}){let o=await Oo(r),u=await Oo(t);return await xo(u,o,e,n)},calcSimilarityAndDraw:async function(t,e,n,o,u={}){let i=ct(u,"drawBorderWidth");Ht(i)||(i=2);let a=ct(u,"drawBorderColor");$t(a)||(a="#f00"),a=$o.toRgb(a);let f=await Oo(e),c=await Oo(t),l=await xo(c,f,n,u),s=new r.Point2(l.x,l.y),h=new r.Point2(l.x+l.width,l.y+l.height);return f.drawRectangle(s,h,new r.Vec3(a.b,a.g,a.r),i,r.LINE_8),await ko(o,f),{...l,fp:o}},screenAndDrawCircle:async function(t,e,n,o,u,i,a,f={}){let c=ct(f,"drawCircleRadius");Ht(c)||(c=5);let l=ct(f,"drawBorderWidth");Ht(l)||(l=2);let s=ct(f,"drawBorderColor");$t(s)||(s="#f00"),s=$o.toRgb(s),await So.screenSave(t,e,n,o,a);let h=await Oo(a),g=new r.Point2(u,i);h.drawCircle(g,c,new r.Vec3(s.b,s.g,s.r),l,r.LINE_8),await ko(a,h)}}});
//# sourceMappingURL=compare.umd.js.map
